/* Card Styling - Responsive + Retro */

:root {
  /* Card dimensions - vmin for viewport responsiveness */
  --card-width: min(12vmin, 90px);
  --card-height: calc(var(--card-width) * 1.4);
  --card-radius: 3px;

  /* Stack offsets */
  --stack-offset: clamp(18px, 3.5vmin, 28px);
  --stack-offset-facedown: clamp(4px, 0.8vmin, 8px);

  /* Spacing */
  --pile-gap: clamp(8px, 1.5vmin, 16px);
}

/* Container query support for iframe embedding */
@supports (container-type: inline-size) {
  .game-container {
    container-type: inline-size;
  }

  @container (max-width: 500px) {
    :root {
      --card-width: min(13cqw, 70px);
    }
  }

  @container (max-width: 400px) {
    :root {
      --card-width: min(13cqw, 55px);
      --stack-offset: clamp(12px, 2.5cqw, 20px);
    }
  }
}

/* Card base */
.card {
  width: var(--card-width);
  height: var(--card-height);
  border-radius: var(--card-radius);
  background-color: white;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  border: 1px solid #000;
  box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.5);
  position: absolute;
  cursor: pointer;
  user-select: none;
  touch-action: none;
  transition: transform 0.08s ease;
  image-rendering: auto;
}

/* Card hover state */
.card:hover:not(.facedown) {
  box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.6);
}

/* Card active/dragging state */
.card.dragging {
  cursor: grabbing;
  box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
  z-index: 1000 !important;
  transform: scale(1.02);
}

/* Cards being dragged along with the main card */
.card.dragging-child {
  z-index: 1000 !important;
}

/* Card selected state */
.card.selected {
  box-shadow: 0 0 0 2px #00ff41, 1px 1px 0 rgba(0, 0, 0, 0.5);
}

/* Face-down card - Classic blue crosshatch pattern */
.card.facedown {
  background-color: #000080;
  background-image:
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      rgba(255,255,255,0.1) 2px,
      rgba(255,255,255,0.1) 4px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 2px,
      rgba(255,255,255,0.1) 2px,
      rgba(255,255,255,0.1) 4px
    );
  border: 2px solid #4040a0;
  cursor: default;
}

/* Face-down but clickable (top of stock) */
.card.facedown.clickable {
  cursor: pointer;
}

/* Last facedown card in tableau - can be clicked to flip */
.card.facedown.flippable {
  cursor: pointer;
}

/* Card face images */
.card[data-suit="hearts"][data-rank="1"] { background-image: url('../cards/ace_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="2"] { background-image: url('../cards/2_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="3"] { background-image: url('../cards/3_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="4"] { background-image: url('../cards/4_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="5"] { background-image: url('../cards/5_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="6"] { background-image: url('../cards/6_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="7"] { background-image: url('../cards/7_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="8"] { background-image: url('../cards/8_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="9"] { background-image: url('../cards/9_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="10"] { background-image: url('../cards/10_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="11"] { background-image: url('../cards/jack_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="12"] { background-image: url('../cards/queen_of_hearts.svg'); }
.card[data-suit="hearts"][data-rank="13"] { background-image: url('../cards/king_of_hearts.svg'); }

.card[data-suit="diamonds"][data-rank="1"] { background-image: url('../cards/ace_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="2"] { background-image: url('../cards/2_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="3"] { background-image: url('../cards/3_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="4"] { background-image: url('../cards/4_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="5"] { background-image: url('../cards/5_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="6"] { background-image: url('../cards/6_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="7"] { background-image: url('../cards/7_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="8"] { background-image: url('../cards/8_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="9"] { background-image: url('../cards/9_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="10"] { background-image: url('../cards/10_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="11"] { background-image: url('../cards/jack_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="12"] { background-image: url('../cards/queen_of_diamonds.svg'); }
.card[data-suit="diamonds"][data-rank="13"] { background-image: url('../cards/king_of_diamonds.svg'); }

.card[data-suit="clubs"][data-rank="1"] { background-image: url('../cards/ace_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="2"] { background-image: url('../cards/2_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="3"] { background-image: url('../cards/3_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="4"] { background-image: url('../cards/4_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="5"] { background-image: url('../cards/5_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="6"] { background-image: url('../cards/6_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="7"] { background-image: url('../cards/7_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="8"] { background-image: url('../cards/8_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="9"] { background-image: url('../cards/9_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="10"] { background-image: url('../cards/10_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="11"] { background-image: url('../cards/jack_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="12"] { background-image: url('../cards/queen_of_clubs.svg'); }
.card[data-suit="clubs"][data-rank="13"] { background-image: url('../cards/king_of_clubs.svg'); }

.card[data-suit="spades"][data-rank="1"] { background-image: url('../cards/ace_of_spades.svg'); }
.card[data-suit="spades"][data-rank="2"] { background-image: url('../cards/2_of_spades.svg'); }
.card[data-suit="spades"][data-rank="3"] { background-image: url('../cards/3_of_spades.svg'); }
.card[data-suit="spades"][data-rank="4"] { background-image: url('../cards/4_of_spades.svg'); }
.card[data-suit="spades"][data-rank="5"] { background-image: url('../cards/5_of_spades.svg'); }
.card[data-suit="spades"][data-rank="6"] { background-image: url('../cards/6_of_spades.svg'); }
.card[data-suit="spades"][data-rank="7"] { background-image: url('../cards/7_of_spades.svg'); }
.card[data-suit="spades"][data-rank="8"] { background-image: url('../cards/8_of_spades.svg'); }
.card[data-suit="spades"][data-rank="9"] { background-image: url('../cards/9_of_spades.svg'); }
.card[data-suit="spades"][data-rank="10"] { background-image: url('../cards/10_of_spades.svg'); }
.card[data-suit="spades"][data-rank="11"] { background-image: url('../cards/jack_of_spades.svg'); }
.card[data-suit="spades"][data-rank="12"] { background-image: url('../cards/queen_of_spades.svg'); }
.card[data-suit="spades"][data-rank="13"] { background-image: url('../cards/king_of_spades.svg'); }

/* Pile placeholders - Classic card back outline style */
.pile-placeholder {
  width: var(--card-width);
  height: var(--card-height);
  border: 2px solid #000080;
  border-radius: var(--card-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: calc(var(--card-width) * 0.4);
  color: rgba(255, 255, 255, 0.2);
  background-color: #000060;
  background-image:
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      rgba(255,255,255,0.05) 2px,
      rgba(255,255,255,0.05) 4px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 2px,
      rgba(255,255,255,0.05) 2px,
      rgba(255,255,255,0.05) 4px
    );
}

/* Stock pile - show recycle icon when empty */
.pile.stock.empty .pile-placeholder {
  cursor: pointer;
}

.pile.stock.empty .pile-placeholder::after {
  content: 'â†»';
  font-size: calc(var(--card-width) * 0.5);
  color: rgba(255, 255, 255, 0.4);
}

/* Foundation pile - valid drop highlight */
.pile.foundation.valid-drop .pile-placeholder,
.pile.foundation.valid-drop .card:last-child {
  box-shadow: 0 0 0 2px #00ff41, 0 0 8px rgba(0, 255, 65, 0.5);
}

/* Tableau pile - valid drop highlight */
.pile.tableau-pile.valid-drop {
  background: rgba(0, 255, 65, 0.1);
  border-radius: var(--card-radius);
}

.pile.tableau-pile.valid-drop .card:last-child {
  box-shadow: 0 0 0 2px #00ff41, 1px 1px 0 rgba(0, 0, 0, 0.5);
}
